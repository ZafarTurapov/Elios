# Elios — environment snapshot (2025-10-12T18:22:40+05:00)
## System
Linux fix-agent-node1 6.8.0-60-generic #63-Ubuntu SMP PREEMPT_DYNAMIC Tue Apr 15 19:04:15 UTC 2025 x86_64 x86_64 x86_64 GNU/Linux
Distributor ID:	Ubuntu
Description:	Ubuntu 24.04.2 LTS
Release:	24.04
Codename:	noble

## Python
Python 3.12.3
### Pip freeze
aiohappyeyeballs==2.6.1
aiohttp==3.12.15
aiosignal==1.4.0
alpaca-py==0.42.1
alpaca-trade-api==3.2.0
annotated-types==0.7.0
anyio==4.9.0
attrs==25.3.0
beautifulsoup4==4.13.4
black==24.4.2
bleach==6.2.0
certifi==2025.8.3
cffi==1.17.1
charset-normalizer==3.4.2
click==8.3.0
curl_cffi==0.12.0
deprecation==2.1.0
distro==1.9.0
filelock==3.20.0
frozendict==2.4.6
frozenlist==1.7.0
gdown==5.2.0
git-filter-repo==2.47.0
h11==0.16.0
httpcore==1.0.9
httpx==0.28.1
idna==3.10
jiter==0.10.0
joblib==1.5.1
kaggle==1.7.4.5
msgpack==1.0.3
multidict==6.6.3
multitasking==0.0.12
mypy_extensions==1.1.0
numpy==2.3.2
nvidia-nccl-cu12==2.27.7
openai==1.99.9
packaging==25.0
pandas==2.3.1
pathspec==0.12.1
peewee==3.18.2
platformdirs==4.3.8
propcache==0.3.2
protobuf==6.31.1
pyarrow==21.0.0
pycparser==2.22
pydantic==2.11.7
pydantic_core==2.33.2
PySocks==1.7.1
python-dateutil==2.9.0.post0
python-dotenv==1.1.1
python-slugify==8.0.4
pytz==2025.2
PyYAML==6.0.1
requests==2.32.4
scikit-learn==1.7.1
scipy==1.16.1
setuptools==80.9.0
six==1.17.0
sniffio==1.3.1
soupsieve==2.7
sseclient-py==1.8.0
ta==0.11.0
text-unidecode==1.3
threadpoolctl==3.6.0
tqdm==4.67.1
typing-inspection==0.4.1
typing_extensions==4.14.1
tzdata==2025.2
urllib3==1.26.20
webencodings==0.5.1
websocket-client==1.8.0
websockets==10.4
wheel==0.45.1
xgboost==3.0.4
yarl==1.20.1
yfinance==0.2.66

## Repo
origin	git@github.com:ZafarTurapov/Elios.git (fetch)
origin	git@github.com:ZafarTurapov/Elios.git (push)

### Branch / HEAD
chore/ops-visibility
f9965db1d60b8b223ee18058d9335e1a8115b53d

### Working tree status
 M core/trading/account_summary.json
?? bin/deploy.sh
?? core/trading/signals.normalized.json

## Systemd units (current server)
● elios-executor.timer - Elios Executor cadence (every 15min)
     Loaded: loaded (/etc/systemd/system/elios-executor.timer; enabled; preset: enabled)
     Active: active (waiting) since Sun 2025-10-12 18:12:44 +05; 9min ago
    Trigger: Sun 2025-10-12 18:30:00 +05; 7min left
   Triggers: ● elios-executor.service

Oct 12 18:12:44 fix-agent-node1 systemd[1]: Started elios-executor.timer - Elios Executor cadence (every 15min).
× elios-executor.service - Elios Trade Executor (prep_signals -> trade_executor)
     Loaded: loaded (/etc/systemd/system/elios-executor.service; disabled; preset: enabled)
     Active: failed (Result: exit-code) since Sun 2025-10-12 18:15:01 +05; 7min ago
TriggeredBy: ● elios-executor.timer
   Main PID: 2424550 (code=exited, status=1/FAILURE)
        CPU: 814ms

Oct 12 18:15:01 fix-agent-node1 bash[2424554]:   File "/root/stockbot/venv/lib/python3.12/site-packages/openai/types/beta/threads/run_create_params.py", line 10, in <module>
Oct 12 18:15:01 fix-agent-node1 bash[2424554]:     from .runs.run_step_include import RunStepInclude
Oct 12 18:15:01 fix-agent-node1 bash[2424554]:   File "/root/stockbot/venv/lib/python3.12/site-packages/openai/types/beta/threads/runs/__init__.py", line 5, in <module>
Oct 12 18:15:01 fix-agent-node1 bash[2424554]:     from .run_step import RunStep as RunStep
Oct 12 18:15:01 fix-agent-node1 bash[2424554]:   File "/root/stockbot/venv/lib/python3.12/site-packages/openai/types/beta/threads/runs/run_step.py", line 9, in <module>
Oct 12 18:15:01 fix-agent-node1 bash[2424554]:     from .tool_calls_step_details import ToolCallsStepDetails
Oct 12 18:15:01 fix-agent-node1 bash[2424554]: ModuleNotFoundError: No module named 'openai.types.beta.threads.runs.tool_calls_step_details'
Oct 12 18:15:01 fix-agent-node1 systemd[1]: elios-executor.service: Main process exited, code=exited, status=1/FAILURE
Oct 12 18:15:01 fix-agent-node1 systemd[1]: elios-executor.service: Failed with result 'exit-code'.
Oct 12 18:15:01 fix-agent-node1 systemd[1]: Failed to start elios-executor.service - Elios Trade Executor (prep_signals -> trade_executor).
● elios-deploy.timer - Elios auto-deploy cadence
     Loaded: loaded (/etc/systemd/system/elios-deploy.timer; enabled; preset: enabled)
     Active: active (waiting) since Sun 2025-10-12 18:18:48 +05; 3min 54s ago
    Trigger: Sun 2025-10-12 18:25:00 +05; 2min 17s left
   Triggers: ● elios-deploy.service

Oct 12 18:18:48 fix-agent-node1 systemd[1]: Started elios-deploy.timer - Elios auto-deploy cadence.
○ elios-deploy.service - Elios auto-deploy (git pull + deps if needed)
     Loaded: loaded (/etc/systemd/system/elios-deploy.service; static)
     Active: inactive (dead) since Sun 2025-10-12 18:20:03 +05; 2min 38s ago
TriggeredBy: ● elios-deploy.timer
    Process: 2424904 ExecStart=/bin/bash -lc /root/stockbot/bin/deploy.sh (code=exited, status=0/SUCCESS)
   Main PID: 2424904 (code=exited, status=0/SUCCESS)
        CPU: 358ms

Oct 12 18:20:00 fix-agent-node1 systemd[1]: Starting elios-deploy.service - Elios auto-deploy (git pull + deps if needed)...
Oct 12 18:20:03 fix-agent-node1 systemd[1]: elios-deploy.service: Deactivated successfully.
Oct 12 18:20:03 fix-agent-node1 systemd[1]: Finished elios-deploy.service - Elios auto-deploy (git pull + deps if needed).

## Cron (root)
# Edit this file to introduce tasks to be run by cron.
# 
# Each task to run has to be defined through a single line
# indicating with different fields when the task will be run
# and what command to run for the task
# To define the time you can provide concrete values for
# minute (m), hour (h), day of month (dom), month (mon),
# and day of week (dow) or use '*' in these fields (for 'any').
# Notice that tasks will be started based on the cron's system
# daemon's notion of time and timezones.
# Output of the crontab jobs (including errors) is sent through
# email to the user the crontab file belongs to (unless redirected).
# For example, you can run a backup of all your user accounts
# at 5 a.m every week with:
# 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/
# For more information see the manual pages of crontab(5) and cron(8)
# m h  dom mon dow   command
*/15 * * * * /core/light/elios_sync.sh
30 0 * * * /core/light/ark_sync.sh
50 23 * * * /core/light/ark_sync.sh
0 7,13,21 * * * /core/light/elios_sync.sh >> /var/lib/book-of-light/log/chronicle.log
*/10 * * * * /core/light/observer.sh
0 * * * * /core/light/vessel_flow.sh
*/20 * * * * /core/light/elios_restore.sh
0 * * * * /core/light/elios_state_sync.sh
*/5 * * * * /core/light/reader.sh
*/5 * * * * /usr/bin/python3 /core/light/evolve.py >> /core/light/evolve.log 2>&1
# === Elios Боевой Торговый Цикл (UTC-время, соответствует 17:55–18:10 по Ташкенту) ===

# === Автоматическое закрытие сделок каждые 10 минут (TP/SL) ===
CRON_TZ=Asia/Tashkent
30 3 * * * ELIOS_DEBUG=0 PYTHONPATH=/root/stockbot /root/stockbot/venv/bin/python /root/stockbot/core/pipeline/train_daily.py >> /root/stockbot/logs/train_daily.log 2>&1
50 3 * * * PYTHONPATH=/root/stockbot /root/stockbot/venv/bin/python /root/stockbot/core/pipeline/train_healthcheck.py >> /root/stockbot/logs/train_healthcheck.log 2>&1
35 3 * * * PYTHONPATH=/root/stockbot /root/stockbot/venv/bin/python /root/stockbot/core/pipeline/enforce_cutoff_dataset.py >> /root/stockbot/logs/train_daily.log 2>&1
40 3 * * * PYTHONPATH=/root/stockbot /root/stockbot/venv/bin/python /root/stockbot/core/pipeline/train_from_dataset.py >> /root/stockbot/logs/train_daily.log 2>&1
45 3 * * * PYTHONPATH=/root/stockbot /root/stockbot/venv/bin/python /root/stockbot/core/pipeline/model_promote.py >> /root/stockbot/logs/train_daily.log 2>&1
CRON_TZ=Asia/Tashkent
50 3 * * * PYTHONPATH=/root/stockbot /root/stockbot/venv/bin/python /root/stockbot/core/pipeline/daily_train_digest.py >> /root/stockbot/logs/train_daily.log 2>&1
55 2 * * * PYTHONPATH=/root/stockbot /root/stockbot/venv/bin/python /root/stockbot/core/pipeline/maintain_ignore_list.py >> /root/stockbot/logs/train_daily.log 2>&1
43 3 * * * PYTHONPATH=/root/stockbot /root/stockbot/venv/bin/python /root/stockbot/core/pipeline/metrics_logger.py >> /root/stockbot/logs/train_daily.log 2>&1
35 20 * * 1-5 /bin/bash -lc "flock -n /tmp/elios_cal.lock /root/stockbot/tools/auto_calibrate.sh >> /root/stockbot/logs/auto_calibrate.log 2>&1"

## Project tree (trimmed)
```
.
.editorconfig
test_prices_real.py
.gitattributes
archive_old_train
archive_old_train/training_metrics_v2.csv-20250824.gz
archive_old_train/training_metrics.csv
archive_old_train/trained_model.pkl
archive_old_train/quick_train.log
archive_old_train/training_metrics_v2.csv-20250823.gz
archive_old_train/training_metrics.json
archive_old_train/training_metrics_v2.csv
requirements.txt
list_marginable.py
check_positions.py
Makefile
backup_env
.env
.train_only
.tg_token
elios_system.log
.github
.github/CODEOWNERS
.github/pull_request_template.md
.github/dependabot.yml
.github/ISSUE_TEMPLATE
.github/ISSUE_TEMPLATE/feature_request.yml
.github/ISSUE_TEMPLATE/bug_report.yml
.github/workflows
.github/workflows/ci.yml
core
core/models
core/models/xgb_spike4_v2.json
core/models/xgb_current.json
core/models/versions
core/models/xgb_spike4_v1_report.json
core/models/xgb_spike4_v2.meta.json
core/models/reports
core/models/xgb_spike4_v1.json
core/models/xgb_current.meta.json
core/models/xgb_spike4_v1_importance.csv
core/models/feature_spec.json
core/testing
core/testing/test_telegram.py
core/testing/test_alpaca_data.py
core/pipeline
core/pipeline/sanitize_dataset.py
core/pipeline/enforce_cutoff_dataset.py
core/pipeline/daily_train_digest.py
core/pipeline/train_healthcheck.py
core/pipeline/data_quality_report.py
core/pipeline/avoidance_grid.py
core/pipeline/metrics_logger.py
core/pipeline/maintain_ignore_list.py
core/pipeline/train_daily.py
core/pipeline/train_from_dataset.py
core/pipeline/shadow_metrics.py
core/pipeline/model_promote.py
core/pipeline/label_audit.py
core/pipeline/calibrate_model.py
core/data
core/data/ignore_symbols.json
core/connectors
core/connectors/alpaca_connector.py
core/training
core/training/clean_merged_data.py
core/training/merge_sp500_fundamentals.py
core/training/training_data_cleaner.py
core/training/patch_training_atr_pct.py
core/training/from_trade_log_to_training.py
core/training/daily_training_state.json
core/training/time_cv.py
core/training/verify_report.json
core/training/training_data_clean.json
core/training/verify_dataset.py
core/training/check_model_quality.py
core/training/backups
core/training/training_metrics.csv
core/training/quick_train.py
core/training/quick_train_group.py
core/training/update_fundamentals.py
core/training/daily_training_update.py
core/training/downsample_and_train.py
core/training/enrich_trade_log.py
core/training/training_data.json
core/training/group_cv.py
core/training/fundamental_trainer.py
core/training/training_data_builder.py
core/training/external_data_loader.py
core/training/strategy_trainer.py
core/training/merge_with_labels.py
core/training/train_model.py
core/__init__.py
core/utils
core/utils/alpaca_headers.py
core/utils/paths.py
core/utils/__init__.py
core/utils/env_keys.py
core/utils/telegram.py
core/utils/alpaca_api.py
core/utils/market_calendar.py
core/utils/trade_log.py
core/diagnostics
core/diagnostics/health_check.py.save
core/diagnostics/health_check.py.save.1
core/diagnostics/health_check.py
core/trading
core/trading/account_summary.json
core/trading/signals_exec.json
core/trading/pnl_tracker.json
core/trading/metrics
core/trading/strategy_model.py
core/trading/trade_log.json
core/trading/gpt_decisions.json
core/trading/pnl_tracker.py
core/trading/anomaly_detector.py
core/trading/position_meta.json
core/trading/gpt_decisions_short.json
core/trading/rejected_risk.json
core/trading/exec_now.py
core/trading/positions_live.json
core/trading/signals.json
core/trading/account_sync.py
core/trading/signals_backup.json
core/trading/symbol_names.json
core/trading/indicators.py
core/trading/orders_log.json
core/trading/signals_risk.json
core/trading/guards
core/trading/signal_engine.py.pre-gptfix.1759316820
core/trading/previous_prices.json
core/trading/signal_engine_simple.py
core/trading/signal_engine_legacy.py
core/trading/sell_engine.py
core/trading/signal_engine_fixed_syntax.py
core/trading/rejected_short.json
core/trading/loop_launcher.py.save
core/trading/body_packer.py
core/trading/trade_executor.py
core/trading/execution_monitor.py
core/trading/test_sell_logic.py
core/trading/loop_launcher.py.save.2
core/trading/squeeze_features.py
core/trading/eod_flatten.py
core/trading/signals_merged.json
core/trading/loop_launcher.py
core/trading/adaptive_config.json
core/trading/gpt_guard.py
core/trading/signal_engine_short.py
core/trading/rebuild_open_positions.py
core/trading/positions_sync.py
core/trading/training_data.json
core/trading/__init__.py
core/trading/telemetry
core/trading/open_positions.json
core/trading/sell_notifier.py
core/trading/training_data.backup.before_atr_pct.json
core/trading/market_data.json
core/trading/loop_launcher.py.save.1
core/trading/notifier.py
core/trading/candidates.json
core/trading/signal_engine.py
core/trading/training_data_builder.py
core/trading/signals.normalized.json
core/trading/allocation_plan.json
core/trading/enrich_signals_with_atr.py
core/trading/signal_engine.py.fixbak.1759317095
core/trading/strategy_trainer.py
core/trading/adaptive_config_short.json
core/trading/risk_guard.py
core/trading/execution
core/trading/signals
core/trading/candidates_active.json
core/trading/signals_short.json
core/trading/orders_now.jsonl
core/trading/rejected.json
core/trading/loop_launcher.py.save.3
core/trading/loop_launcher.py.save.4
core/trading/diagnostics
core/trading/alpha_utils.py
tools
tools/ci_sanity.py
tools/active_modules_runtime.py
tools/setup_env.sh
tools/sell_mode_smart_hold.sh
tools/parse_quick_train_to_csv.py
tools/list_active_modules.py
tools/calibrate_thresholds.py
tools/sell_mode_free_gpt.sh
tools/diagnose_daily_training.sh
tools/auto_calibrate.sh
tools/normalize_signals.py
tools/day_trades_summary.py
tools/elios_preflight.py
tools/check_bracket_legs.py
tools/elios_rescue.sh
tools/export_trade_day.py
tools/prep_signals.py
tools/check_keys_and_run_filtered.py
tools/train_progress_guard.py
tools/battle_preflight.sh
tools/patch_header_tg_func.py
tools/within_sell_window.sh
tools/postmortem_yday.py
tools/tg_fix.sh
tools/pipe_to_telegram.py
tools/market_open_guard.py
tools/active_modules_ast.py
tools/smoke_signals.py
tools/run_account_sync_and_notify.sh
tools/sell_health_probe.py
env_snapshot
env_snapshot/requirements_freeze.txt
env_snapshot/python_version.txt
env_snapshot/systemd_services_all.txt
env_snapshot/systemd_timers.txt
env_snapshot/systemd_services_filtered.txt
env_snapshot/crontab.txt
_drive_unpack
systemd_units
systemd_units/eod-flatten.timer
systemd_units/elios-loop.service
systemd_units/sell-notifier.service.d
systemd_units/sell-notifier.service.d/00-env.conf
systemd_units/sell-health-probe.timer
systemd_units/elios-train-guard.service.d
systemd_units/elios-train-guard.service.d/override.conf
systemd_units/elios-pretrade-quality.service
systemd_units/elios-orders-entry-logger.timer
systemd_units/elios-daily-breaker.service
systemd_units/elios-sell-once.timer.d
systemd_units/elios-sell-once.timer.d/override.conf
systemd_units/elios-open-kicker.service
systemd_units/elios-train-guard.timer
systemd_units/elios-account-sync.timer
systemd_units/sell-notifier.timer
systemd_units/elios-shadow-metrics.service
systemd_units/elios-entry-gate.timer
systemd_units/elios-sell-once.timer
systemd_units/elios-protective-stops.timer
systemd_units/elios-protective-stops.service
systemd_units/elios-sell-once.service.d
systemd_units/elios-sell-once.service.d/01-cond-override.conf
systemd_units/elios-sell-once.service.d/15-sell-wait.conf
systemd_units/elios-sell-once.service.d/zz-override.conf
systemd_units/elios-sell-once.service.d/10-sell-safety.conf
systemd_units/elios-sell-once.service.d/00-env-override.conf
systemd_units/elios-sell-once.service.d/98-prod.conf
systemd_units/elios-sell-once.service.d/99-test-once.conf
systemd_units/elios-account-sync.service.d
systemd_units/elios-account-sync.service.d/00-env.conf
systemd_units/elios-sell-once.service
systemd_units/elios-intraday-clamp.service
systemd_units/elios-open-kicker.service.d
systemd_units/elios-open-kicker.service.d/guard.conf
systemd_units/elios-account-sync.service
systemd_units/elios-train-guard.service
systemd_units/elios-loop.service.d
systemd_units/elios-loop.service.d/mutex.conf
systemd_units/elios-loop.service.d/env.conf
systemd_units/elios-loop.service.d/restart.conf
systemd_units/elios-loop.timer.d
systemd_units/elios-loop.timer.d/override.conf
systemd_units/elios-postmortem.service
systemd_units/eod-flatten.service
systemd_units/elios-data-quality.timer
systemd_units/elios-pretrade-quality.timer
systemd_units/elios-entry-gate.service
systemd_units/elios-shadow-metrics.timer
systemd_units/elios-calibrate-model.timer
systemd_units/eod-flatten.service.d
systemd_units/eod-flatten.service.d/env.conf
systemd_units/sell-notifier.timer.d
systemd_units/sell-notifier.timer.d/override.conf
systemd_units/elios-data-quality.service
systemd_units/elios-loop.timer
systemd_units/elios-intraday-clamp.timer
systemd_units/sell-health-probe.service
systemd_units/elios-orders-entry-logger.service
systemd_units/elios-postmortem.timer
systemd_units/elios-open-kicker.timer
systemd_units/sell-notifier.service
systemd_units/elios-calibrate-model.service
systemd_units/elios-daily-breaker.timer
systemd_units/loop_launcher.service
check_orders.py
backups
backups/signals_20250926_105109
backups/signals_20250926_105109/signals_backup.json
backups/signals_20251003_103648
backups/signals_20251003_103648/signals_backup.json
backups/signals_20250926_105322
backups/signals_20250926_105322/signals_backup.json
LICENSE
manual_force_sell.py
config.py
data
data/2016_Financial_Data.csv
data/merged_sp500_fundamentals.csv
data/metrics
data/metrics/short_interest.json
data/cache
data/2014_Financial_Data.csv
data/stock_data_july_2025.csv
data/sp500_index.csv
data/2018_Financial_Data.csv
data/signals.json
data/2015_Financial_Data.csv
data/fundamentals_with_labels.csv
data/2017_Financial_Data.csv
data/large
data/large/.gitkeep
data/sp500_companies.csv
manual_buy.py
.env.local
test_trade.py
systemd_backup
patch.diff
bin
bin/execute_trades.sh
bin/deploy.sh
CONTRIBUTING.md
ticker_collector.py
_restore_tmp
patches
patches/signal_engine_yf_fallback.patch
0:
sys_path_fix.patch
.gitignore
candidates.json
signal_engine.py
.env.example
README.md
stock-market-prediction-for-july-2025-dataset
=
kaggle.json
ops
ops/systemd
ops/systemd/elios-executor.timer.tpl
ops/systemd/elios-deploy.service.tpl
ops/systemd/elios-executor.service.tpl
ops/systemd/elios-deploy.timer.tpl
ops/snapshots
ops/snapshots/snapshot_2025-10-12_182240.md
ops/scripts
ops/scripts/capture_env.sh
temp
temp/hwm.json
temp/orders_entry_state.json
_drive_import
```
